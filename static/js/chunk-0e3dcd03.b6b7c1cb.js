(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e3dcd03"],{"07ac":function(t,e,a){var i=a("23e7"),n=a("6f53").values;i({target:"Object",stat:!0},{values:function(t){return n(t)}})},3385:function(t,e,a){},"6f53":function(t,e,a){var i=a("83ab"),n=a("df75"),l=a("fc6a"),s=a("d1e7").f,r=function(t){return function(e){var a,r=l(e),o=n(r),c=o.length,u=0,d=[];while(c>u)a=o[u++],i&&!s.call(r,a)||d.push(t?[a,r[a]]:r[a]);return d}};t.exports={entries:r(!0),values:r(!1)}},da6b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("球友管理")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.handleAdd}},[t._v("新增球友")])],1),a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"姓名/電話/電子郵件"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search",e)},expression:"listQuery.search"}}),a("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"狀態",clearable:""},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"row-key":function(t){return t.line_userid},border:""}},[a("el-table-column",{attrs:{prop:"line_userid",label:"ID",width:"120"}}),a("el-table-column",{attrs:{prop:"line_username",label:"姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"player_tel",label:"電話",width:"120"}}),a("el-table-column",{attrs:{prop:"player_lineid",label:"Line ID",width:"120"}}),a("el-table-column",{attrs:{prop:"gender",label:"性別",width:"80"}}),a("el-table-column",{attrs:{prop:"member_type",label:"會員類型",width:"100"}}),a("el-table-column",{attrs:{prop:"rank_score",label:"積分",width:"80"}}),a("el-table-column",{attrs:{label:"暱稱",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.nickname?Object.values(a.nickname)[0]:"")+" ")]}}])}),a("el-table-column",{attrs:{label:"報名次數",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(" "+t._s(a.signedup_sessions?a.signedup_sessions.length:0)+" ")]}}])}),a("el-table-column",{attrs:{prop:"update_datetime",label:"最後更新",width:"180"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.handleEdit(i)}}},[t._v("編輯")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(i)}}},[t._v("刪除")])]}}])})],1),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(e){return t.$set(t.listQuery,"page",e)},"update:current-page":function(e){return t.$set(t.listQuery,"page",e)},"update:pageSize":function(e){return t.$set(t.listQuery,"limit",e)},"update:page-size":function(e){return t.$set(t.listQuery,"limit",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"create"===t.dialogStatus?"新增球友":"編輯球友",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"暱稱",prop:"nickname"}},[a("el-input",{model:{value:t.temp.nickname,callback:function(e){t.$set(t.temp,"nickname",e)},expression:"temp.nickname"}})],1),a("el-form-item",{attrs:{label:"積分",prop:"rank_score"}},[a("el-input",{attrs:{type:"number"},model:{value:t.temp.rank_score,callback:function(e){t.$set(t.temp,"rank_score",t._n(e))},expression:"temp.rank_score"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){"create"===t.dialogStatus?t.createData():t.updateData()}}},[t._v("確認")])],1)],1)],1)},n=[],l=a("ade3"),s=(a("99af"),a("c740"),a("fb6a"),a("a434"),a("d3b7"),a("07ac"),a("ac1f"),a("25f0"),a("4d90"),a("841c"),a("c24f")),r={name:"PlayerManagement",data:function(){return{list:[],total:0,listLoading:!0,listQuery:{page:1,limit:10,search:void 0,status:void 0},statusOptions:[{label:"啟用",value:"active"},{label:"停用",value:"inactive"}],dialogFormVisible:!1,dialogStatus:"",temp:{id:void 0,nickname:"",rank_score:""},rules:{nickname:[{required:!0,message:"請輸入暱稱",trigger:"blur"}],rank_score:[{required:!0,message:"請輸入積分",trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(s["d"])({page:this.listQuery.page,limit:this.listQuery.limit,search:this.listQuery.search,status:this.listQuery.status}).then((function(e){console.log("完整API回傳 res：",e),t.list=e.data||[],t.total=e.total||0,console.log("API回傳資料 this.list:",t.list)})).finally((function(){t.listLoading=!1}))},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},resetTemp:function(){this.temp={id:void 0,nickname:"",rank_score:""}},handleAdd:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick((function(){t.$refs["dataForm"].clearValidate()}))},handleEdit:function(t){var e=this;this.temp={id:t.line_userid,nickname:t.nickname?Object.values(t.nickname)[0]:"",rank_score:t.rank_score},this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick((function(){e.$refs["dataForm"].clearValidate()}))},createData:function(){var t=this;this.$refs["dataForm"].validate((function(e){e&&(t.temp.id=t.list.length+1,t.list.unshift(t.temp),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"創建成功",type:"success",duration:2e3}))}))},updateData:function(){var t=this;this.$refs["dataForm"].validate((function(e){if(e){var a=new Date,i=function(t){return t.toString().padStart(2,"0")},n="".concat(a.getFullYear()).concat(i(a.getMonth()+1)).concat(i(a.getDate())).concat(i(a.getHours())).concat(i(a.getMinutes())),r="2008".concat(n.slice(4,6)).concat(n.slice(6,8));Object(s["g"])(t.temp.id,{nickname:Object(l["a"])({},"".concat(r),t.temp.nickname),rank_score:t.temp.rank_score}).then((function(){t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),t.getList()})).catch((function(){t.$notify({title:"失敗",message:"更新失敗",type:"error",duration:2e3})}))}}))},handleDelete:function(t){var e=this;this.$confirm("確認刪除該球友?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=e.list.findIndex((function(e){return e.id===t.id}));e.list.splice(a,1),e.$notify({title:"成功",message:"刪除成功",type:"success",duration:2e3})})).catch((function(){e.$message({type:"info",message:"已取消刪除"})}))}}},o=r,c=(a("fdef"),a("2877")),u=Object(c["a"])(o,i,n,!1,null,"94e509e2",null);e["default"]=u.exports},fdef:function(t,e,a){"use strict";a("3385")}}]);